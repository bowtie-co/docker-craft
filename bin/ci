#!/bin/bash

# Check for usac-dev docker-network, create if doesn't exist
(docker network ls | grep -E '(^|\s)usac-dev($|\s)') || docker network create usac-dev

bin/run "env"

if [ ! -d ../usac-dev ]; then
  bin/run "aws s3 cp --recursive s3://$AWS_BUCKET_NAME/usac-dev/ ../usac-dev"

  bin/run "docker-compose -f ../usac-dev/docker-compose.yml up -d"
fi

bin/run "docker ps"

bin/run "bin/build"
bin/run "bin/lint"
bin/run "bin/test"
